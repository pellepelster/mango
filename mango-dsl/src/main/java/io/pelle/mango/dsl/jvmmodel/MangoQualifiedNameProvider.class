package io.pelle.mango.dsl.jvmmodel

import com.google.inject.Inject
import io.pelle.mango.dsl.generator.server.ServerNameUtils
import io.pelle.mango.dsl.mango.Entity
import org.eclipse.emf.ecore.EObject
import org.eclipse.xtext.naming.QualifiedName
import org.eclipse.xtext.xbase.scoping.XbaseQualifiedNameProvider

class MangoQualifiedNameProvider extends XbaseQualifiedNameProvider {

	@Inject
	extension ServerNameUtils serverNameUtils

	def QualifiedName qualifiedName(EObject eObject) {

		if (eObject instanceof Entity) {
			return getConverter().toQualifiedName(serverNameUtils.entityFullQualifiedName(eObject));
		} else {
			return super.getFullyQualifiedName(eObject);
		}

	}
}
