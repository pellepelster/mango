
task(pdeBuild) <<
{
	ant.properties['version'] = mangoVersion
	ant.properties['buildTimeStamp'] = buildTimeStamp
	
	if (versionQualifier)
	{
		ant.properties['versionQualifier'] = versionQualifier
	}
	else
	{
		ant.properties['versionQualifier'] = buildTimeStamp
	}
	
	ant.importBuild 'build.xml'

	buildAll.execute()
}


pdeBuild.onlyIf { !project.hasProperty('skipPdeBuild') }

uploadLocalDevelopment.onlyIf { !project.hasProperty('skipPdeBuild') }

task zipUpdateSite(dependsOn: pdeBuild, type: Zip) {
	from buildDir.name + '/updatesite'
}

artifacts {
	archives (zipUpdateSite) {
		classifier "updatesite"
	}
}

pdeBuild.dependsOn(":mango-dsl-ui:build")
pdeBuild.dependsOn(":mango-libs:build")
pdeBuild.dependsOn(":mango-dsl:build")