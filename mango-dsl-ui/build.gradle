dependencies {
	compile files(fileTree(new File(mango_gradle_dir, 'eclipse/plugins')).exclude('*xtext*ui*.jar').include('*emf*ui*.jar').include('org.eclipse.osgi*.jar').include('org.eclipse.ui*.jar').include('org.eclipse.jface*.jar').include('org.eclipse.compare*.jar').include('org.eclipse.core.resources*.jar').include('org.eclipse.core.command*.jar').include('org.eclipse.equinox.registry*.jar').include('org.eclipse.equinox.common*.jar').include('org.eclipse.core.runtime*.jar').include('org.eclipse.emf.edit*.jar').include('org.eclipse.swt*.jar').include('org.eclipse.text*.jar').exclude("*.source_*.jar"))

	compile group: 'org.eclipse.xtext', name: 'org.eclipse.xtext.common.types.ui', version: versions.xtext
	compile group: 'org.eclipse.xtext', name: 'org.eclipse.xtext.xbase.ui', version: versions.xtext
	compile group: 'org.eclipse.xtext', name: 'org.eclipse.xtext.ui', version: versions.xtext
	compile group: 'org.eclipse.xtext', name: 'org.eclipse.xtext.builder', version: versions.xtext
	compile group: 'org.eclipse.xtext', name: 'org.eclipse.xtext.ui.shared', version: versions.xtext
	compile group: 'org.eclipse.xtext', name: 'org.eclipse.xtext.ui.codetemplates.ui', version: versions.xtext

	compile project(':mango-dsl')
}

buildscript {
	repositories { 
		mavenCentral()
	}
	dependencies { 
		classpath group: 'org.xtend', name: 'xtend-gradle-plugin', version: versions.xtend_gradle
	}
}

apply plugin: "org.xtend.xtend"

sourceSets {
	main {
		java {
			srcDirs = [
				'src',
				'xtend-gen',
				'src-gen' ]
		}
		resources {
			srcDirs = [
				'src',
				'xtend-gen',
				'src-gen' ]
		}

		xtendOutputDir = 'xtend-gen'
	}
}

eclipse {
	project {
		natures 'org.eclipse.xtext.ui.shared.xtextNature'
		buildCommand 'org.eclipse.xtext.ui.shared.xtextBuilder'
	}
}

compileXtend.doFirst {
	def xtendOutputDir = file(sourceSets.main.xtendOutputDir)

	if(xtendOutputDir.exists() ) {
		xtendOutputDir.delete()
	}
	
	xtendOutputDir.mkdirs()
}

//xtend {
//	fork = true
//	useDaemon = true
//	xtendAsPrimaryDebugSource = true
//	hideSyntheticVariables = false
//	encoding = "UTF-8"
//}